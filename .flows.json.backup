[{"id":"1bd17114.208f7f","type":"tab","label":"流程1","disabled":false,"info":""},{"id":"8d2d215.047b26","type":"Gravity Server","server":"gravity1-nats","port":"4222"},{"id":"ce7c2fc5.bbfd68","type":"Gravity Subscriber","z":"1bd17114.208f7f","name":"Gravity","server":"8d2d215.047b26","subscriberID":"","enabledAuth":false,"initialLoad":false,"collections":[],"x":110,"y":1180,"wires":[["5e997637.8b4f58","fcaf454e.703438"]]},{"id":"f899a01d.1d8258","type":"debug","z":"1bd17114.208f7f","name":"Debug HTTP","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":730,"y":1220,"wires":[]},{"id":"950ff7.f5988808","type":"http request","z":"1bd17114.208f7f","name":"Message API POST","method":"POST","ret":"txt","paytoqs":"ignore","url":"http://sms.gfactor.com.tw/message-api/message/v1/send/content","tls":"","persist":false,"proxy":"","authType":"","x":720,"y":1380,"wires":[["f899a01d.1d8258"]]},{"id":"5e997637.8b4f58","type":"debug","z":"1bd17114.208f7f","name":"Debug NATS","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":410,"y":1120,"wires":[]},{"id":"fcaf454e.703438","type":"switch","z":"1bd17114.208f7f","name":"Check Event","property":"payload.eventName","propertyType":"msg","rules":[{"t":"eq","v":"deliveryCreate","vt":"str"},{"t":"eq","v":"deliveryDelete","vt":"str"},{"t":"eq","v":"deliveryUpdate","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":170,"y":1380,"wires":[["10915f53.5494e1"],["d4c0096.a680ef8"],[]]},{"id":"205d0e4c.77c1ba","type":"debug","z":"1bd17114.208f7f","name":"Debug DataFormater","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":440,"y":1220,"wires":[]},{"id":"10915f53.5494e1","type":"function","z":"1bd17114.208f7f","name":"Create Data Formatter","func":"msg.payload={ \n    \n    \"sendType\": \"now\",\n    \"content\": msg.payload.message.MsgData,\n    \"data\": [ {\n        \"phone\": msg.payload.message.MPhoneNum,\n        \"customerId\": msg.payload.message.SenderID,\n        \"customerName\": \"Customer Name\"\n        }   ]\n}\n\nreturn msg","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":1380,"wires":[["205d0e4c.77c1ba","950ff7.f5988808"]]},{"id":"e2b7e1f8.4e6988","type":"http request","z":"1bd17114.208f7f","name":"Message API DELETE","method":"POST","ret":"txt","paytoqs":"ignore","url":"http://61.218.242.124:40000","tls":"","persist":false,"proxy":"","authType":"","x":720,"y":1480,"wires":[[]]},{"id":"d4c0096.a680ef8","type":"function","z":"1bd17114.208f7f","name":"Delete Data Formatter","func":"return msg","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1520,"wires":[["29d484f0.67a72c"]]},{"id":"29d484f0.67a72c","type":"debug","z":"1bd17114.208f7f","name":"Debug Delete DataFormater","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":680,"y":1600,"wires":[]}]